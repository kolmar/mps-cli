/*
 * This Groovy source file was generated by the Gradle 'init' task.
 */
package org.mps_cli.gradle.plugin

class ConeOfInfluenceComputerTest extends TestBase {

    def "cone of influence computer test"() {
        given:
        settingsFile << ""
        buildFile << '''

plugins {
    id('org.mps_cli.gradle.plugin')
}

buildModuleDependencies {
   //sourcesDir = ['../../../../../../../../../mps_test_projects/']   
   sourcesDir = ['C:\\\\work\\\\E3_2.0_Solution\\\\solutions']   
}

computeConeOfInfluence {
   referenceBranchName = "develop" 
   gitRepoRootLocation = 'C:\\\\work\\\\E3_2.0_Solution\\\\'
}

task printConeOfInfluence {
    dependsOn computeConeOfInfluence
    doLast {
        def affectedSolutions = computeConeOfInfluence.affectedSolutions
        println "all affected solutions: ${affectedSolutions.collect { it.name }.sort()}"
    }
}
'''

        when:
        runTask("printConeOfInfluence")

        then:
        result.output.contains "all affected solutions: [tech.cariad.e3_2_0_solution.Deployment, tech.cariad.e3_2_0_solution.FV_Analysis, tech.cariad.e3_2_0_solution.Hardware_Topology, tech.cariad.e3_2_0_solution.L0_Mobility_System, tech.cariad.e3_2_0_solution.L1_Cloud_System, tech.cariad.e3_2_0_solution.L1_Traffic_Infrastructure_System, tech.cariad.e3_2_0_solution.L1_User_Specific_System, tech.cariad.e3_2_0_solution.L1_Vehicle_System, tech.cariad.e3_2_0_solution.L2_ADS_HAD_System, tech.cariad.e3_2_0_solution.L2_Body_System, tech.cariad.e3_2_0_solution.L2_Data_Management_System, tech.cariad.e3_2_0_solution.L2_Drive_System, tech.cariad.e3_2_0_solution.L2_Energy_System, tech.cariad.e3_2_0_solution.L2_HMI_System, tech.cariad.e3_2_0_solution.L2_tmp_Base_and_Cross_Functionality_System, tech.cariad.e3_2_0_solution.L3_AI_System, tech.cariad.e3_2_0_solution.L3_Attachment_System, tech.cariad.e3_2_0_solution.L3_Body_Control_System, tech.cariad.e3_2_0_solution.L3_Body_Structure_System_HUT, tech.cariad.e3_2_0_solution.L3_Body_Structure_System_Platform, tech.cariad.e3_2_0_solution.L3_Brake_System, tech.cariad.e3_2_0_solution.L3_Cockpit_and_Center_Console_System, tech.cariad.e3_2_0_solution.L3_Computing_System, tech.cariad.e3_2_0_solution.L3_Data_Storage_System, tech.cariad.e3_2_0_solution.L3_Drive_Control_System, tech.cariad.e3_2_0_solution.L3_Driver_Information_System, tech.cariad.e3_2_0_solution.L3_Electrical_Power_Supply_System, tech.cariad.e3_2_0_solution.L3_Entertainment_System, tech.cariad.e3_2_0_solution.L3_Entry_and_Exit_System, tech.cariad.e3_2_0_solution.L3_Environment_Communication_System, tech.cariad.e3_2_0_solution.L3_Exterior_Light_System, tech.cariad.e3_2_0_solution.L3_HV_Energy_System, tech.cariad.e3_2_0_solution.L3_In_Vehicle_Engineering_System, tech.cariad.e3_2_0_solution.L3_Interior_Climate_System, tech.cariad.e3_2_0_solution.L3_Interpretation_System, tech.cariad.e3_2_0_solution.L3_MV_LV_Energy_System, tech.cariad.e3_2_0_solution.L3_Perception_System, tech.cariad.e3_2_0_solution.L3_Planning_System_Drive, tech.cariad.e3_2_0_solution.L3_Planning_System_Guard, tech.cariad.e3_2_0_solution.L3_Planning_System_Park, tech.cariad.e3_2_0_solution.L3_Propulsion_System, tech.cariad.e3_2_0_solution.L3_Safety_System, tech.cariad.e3_2_0_solution.L3_Seating_System, tech.cariad.e3_2_0_solution.L3_Sight_System, tech.cariad.e3_2_0_solution.L3_Sign_In_System, tech.cariad.e3_2_0_solution.L3_Sound_System, tech.cariad.e3_2_0_solution.L3_Steering_System, tech.cariad.e3_2_0_solution.L3_Thermal_System, tech.cariad.e3_2_0_solution.L3_Trim_System, tech.cariad.e3_2_0_solution.L3_User_Control_System, tech.cariad.e3_2_0_solution.L3_Vehicle_Add_On_System, tech.cariad.e3_2_0_solution.L3_Vertical_Dynamics_System, tech.cariad.e3_2_0_solution.L3_Wheel_Guidance_System, tech.cariad.e3_2_0_solution.L3_Wheel_System, tech.cariad.e3_2_0_solution.L3_tmp_Diagnostics_System, tech.cariad.e3_2_0_solution.L3_tmp_Software_Deployment_System, tech.cariad.e3_2_0_solution.L3_tmp_VW_OS_Base_Services_System, tech.cariad.e3_2_0_solution.L4_SW.ADAS, tech.cariad.e3_2_0_solution.L4_SW.Body, tech.cariad.e3_2_0_solution.L4_SW.HWP, tech.cariad.e3_2_0_solution.L4_SW.Passenger_Interaction_and_Infotainment, tech.cariad.e3_2_0_solution.L4_SW.SWP.AI_RTE, tech.cariad.e3_2_0_solution.L4_SW.SWP.DefSecProd, tech.cariad.e3_2_0_solution.L4_SW.SWP.GDC, tech.cariad.e3_2_0_solution.L4_SW.SWP.MAGIC, tech.cariad.e3_2_0_solution.L4_SW.SWP.UpdateTech, tech.cariad.e3_2_0_solution.L4_SW.SWP.VWOS, tech.cariad.e3_2_0_solution.Library, tech.cariad.e3_2_0_solution.SWA_Common, tech.cariad.e3_2_0_solution.SWA_Product_Name_A, tech.cariad.e3_2_0_solution.VehicleControlComputePlatformAlpha, tech.cariad.e3_2_0_solution.VehicleControlComputePlatformBeta, tech.cariad.e3_2_0_solution.VehicleControlComputePlatformGamma, tech.cariad.e3_2_0_solution.VehicleMotion, tech.cariad.e3_2_0_solution.VehicleMotionC200, tech.cariad.e3_2_0_solution.ZeC, tech.cariad.e3_2_0_solution.body.LightAndWipe.dimming, tech.cariad.e3_2_0_solution.body.body2.climate, tech.cariad.e3_2_0_solution.body.lightwipe.exterior_light, tech.cariad.e3_2_0_solution.repo_admin, tech.cariad.e3_2_0_solution.swa_energy.high_voltage, tech.cariad.e3_2_0_solution.swa_energy.low_voltage, tech.cariad.e3_2_0_solution.update_technology.oru_contoller, tech.cariad.parking.arch.apsw]"
    }
}
